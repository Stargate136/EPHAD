{% extends "core/base.html" %}

{% block content %}
<div class="container mt-5">

    <!-- Header: Personal Information -->
    <div class="row mb-5 align-items-center">
        <div class="col-md-3">
            {% if cv.personal_info.profile_picture %}
                <img src="{{ cv.personal_info.profile_picture.url }}" alt="Photo de profil" class="img-fluid rounded-circle">
            {% endif %}
        </div>
        <div class="col-md-9">
            <h1>{{ cv.personal_info.full_name }}</h1>
            <p class="lead">{{ cv.title }}</p>
            <p>{{ cv.personal_info.address }} | {{ cv.personal_info.phone }} | <a href="mailto:{{ cv.personal_info.email }}">{{ cv.personal_info.email }}</a></p>
            <!-- TODO : ajouter les liens linkedin github et portfolio avec des icônes -->
        </div>
    </div>

    <!-- Profile Description -->
    <div class="mb-5">
        <h2>Profil</h2>
        <hr>
        <p>{{ cv.profile.description }}</p>
    </div>

    <!-- Experiences -->
    <div class="mb-5">
        <h2>Expériences</h2>
        <hr>
        {% for experience in cv.experiences.all %}
        <div class="mb-4">
            <h4>{{ experience.position }} chez {{ experience.company }}</h4>
            <p>{{ experience.start_date }} - {{ experience.end_date|default:"Actuel" }}</p>
            <p>{{ experience.responsibilities }}</p>
        </div>
        {% endfor %}
    </div>

    <!-- Education -->
    <div class="mb-5">
        <h2>Éducation</h2>
        <hr>
        {% for education in cv.educations.all %}
        <div class="mb-4">
            <h4>{{ education.degree }} à {{ education.institution }}</h4>
            <p>{{ education.start_date }} - {{ education.end_date|default:"Actuel" }}</p>
            <p>{{ education.details }}</p>
        </div>
        {% endfor %}
    </div>

    <!-- Skills -->
    <div class="mb-5">
        <h2>Compétences</h2>
        <hr>
        <div class="row">
            <!-- Hard skills -->
            <div class="col-md-6">
                <h4>Hard skills</h4>
                {% for skill in cv.get_hard_skills %}
                <span class="badge badge-primary m-2">{{ skill.name }}</span>
                {% endfor %}
            </div>
            <!-- Soft skills -->
            <div class="col-md-6">
                <h4>Soft skills</h4>
                {% for skill in cv.get_soft_skills %}
                <span class="badge badge-secondary m-2">{{ skill.name }}</span>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Languages -->
    <div class="mb-5">
        <h2>Langues</h2>
        <hr>
        {% for language in cv.languages.all %}
        <p><strong>{{ language.name }}:</strong> {{ language.proficiency }}</p>
        {% endfor %}
    </div>

    <!-- Hobbies -->
    <div class="mb-5">
        <h2>Loisirs</h2>
        <hr>
        {% for hobby in cv.hobbies.all %}
        <p><strong>{{ hobby.name }}:</strong> {{ hobby.description }}</p>
        {% endfor %}
    </div>

    <!-- Projects -->
    <div class="mb-5">
        <h2>Projets
        <a href="{% url 'core:under_construction' %}" class="btn btn-primary" target="_blank">Voir le portfolio</a></h2>

        <hr>
        {% for project in cv.projects.all %}
        <div class="mb-4">
            <h4>{{ project.title }}</h4>
            <p>{{ project.description }}</p>
            {% if project.link %}
            <a href="{{ project.link }}" class="btn btn-primary" target="_blank">Voir le projet</a>
            {% endif %}
        </div>
        {% endfor %}
    </div>

    <!-- Certifications -->
    <div class="mb-5">
        <h2>Certifications</h2>
        <hr>
        {% for cert in cv.certifications.all %}
        <div class="mb-4">
            <h4>{{ cert.title }}</h4>
            <p><strong>Organisation :</strong> {{ cert.issuing_organization }}</p>
            <p><strong>Date :</strong> {{ cert.date_received }}</p>
            {% if cert.link %}
            <a href="{{ cert.link }}" class="btn btn-primary" target="_blank">Voir la certification</a>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
